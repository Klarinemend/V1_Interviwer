[
    {
        "role": "user",
        "content": "Olá, preciso de um sistema para gerenciar minha clínica veterinária chamada VetLife. \nAtualmente usamos papel e está uma bagunça.\nO sistema precisa cadastrar os tutores com nome, telefone e endereço, e vincular os animais a eles. \nAtendemos principalmente cães e gatos. \nO mais importante é o controle de vacinas: o sistema deve me responder quais vacinas estão vencidas ou próximas de vencer para que possamos avisar os donos. \nAlém disso, precisamos agendar consultas informando qual veterinário vai atender e gerar um histórico clínico de cada animal. \nPor fim, o sistema precisa calcular o valor total dos atendimentos do dia para o fechamento do caixa."
    },
    {
        "role": "model",
        "content": "Olá! Que ótimo que vocês estão buscando modernizar a VetLife e sair do papel. Entendo perfeitamente como a organização é crucial em uma clínica veterinária, e estou muito animado para ajudar a modelar um sistema que atenda às suas necessidades.\n\nPelo que entendi, o sistema que você busca para a VetLife precisa:\n*   Cadastrar **Tutores** (com nome, telefone, endereço).\n*   Vincular **Animais** (principalmente cães e gatos) aos seus **Tutores**.\n*   Gerenciar **Vacinas**, com um alerta para as vencidas ou próximas de vencer.\n*   Agendar **Consultas**, associando-as a um **Veterinário** específico.\n*   Manter um **Histórico Clínico** detalhado para cada Animal.\n*   Calcular o **valor total dos atendimentos do dia** para o fechamento de caixa.\n\nÉ uma base excelente para começarmos! Para que eu possa entender melhor a sua operação e garantir que o sistema seja o mais completo e útil possível, tenho algumas perguntas:\n\n### Sobre Tutores e Animais:\n1.  Você mencionou nome, telefone e endereço para o **Tutor**. Há outros dados que vocês costumam coletar ou que seriam úteis, como um e-mail para comunicação, ou talvez um CPF para identificação mais formal?\n2.  Para os **Animais**, além de cães e gatos, vocês atendem outras espécies ocasionalmente? E quais informações adicionais são importantes para o cadastro de um animal, além do nome e espécie? Pense em raça, idade/data de nascimento, peso, sexo, ou alguma característica especial/observação.\n\n### Sobre Vacinas:\n3.  O controle de vacinas é crucial. Para cada vacina, além da data de aplicação e da data de validade/vencimento, vocês registram o *tipo* da vacina (ex: V8, Raiva, Gripe) e talvez o *lote* ou o *fabricante*? Isso é importante para a rastreabilidade?\n4.  Como vocês definem \"próximo de vencer\"? Uma semana, um mês antes? E o sistema deveria apenas gerar um relatório para a equipe ou seria útil que ele pudesse, por exemplo, sugerir o envio de um lembrete automático ao tutor?\n\n### Sobre Consultas e Agendamento:\n5.  No agendamento de **Consultas**, vocês têm múltiplos veterinários? É importante controlar a disponibilidade de cada veterinário para evitar conflitos de horário? E o que acontece se uma consulta for cancelada ou reagendada? Precisamos registrar o motivo ou o histórico dessas mudanças?\n6.  Além das consultas, vocês realizam outros tipos de atendimento que também precisam ser agendados ou registrados, como cirurgias, exames, banho e tosa (se for o caso), ou procedimentos mais simples?\n\n### Sobre Histórico Clínico:\n7.  O **Histórico Clínico** é vital. O que exatamente compõe um registro no histórico? Pense em data do atendimento, descrição do problema/motivo da visita, diagnóstico, tratamento realizado, medicamentos prescritos, resultados de exames... É importante saber qual veterinário foi responsável por cada registro?\n\n### Sobre Fechamento de Caixa:\n8.  Para o **fechamento de caixa**, o sistema precisa somar o valor de *todos* os atendimentos do dia. \"Atendimento\" aqui inclui apenas consultas e vacinas, ou também a venda de produtos (medicamentos, rações, acessórios) que vocês possam fazer? Como vocês calculam o valor de cada atendimento hoje?\n9.  Vocês aceitam diferentes formas de pagamento (dinheiro, cartão de crédito/débito, Pix)? Seria importante que o sistema registrasse a forma de pagamento de cada atendimento para o fechamento de caixa?\n\nEstou ansioso para saber mais e começar a construir essa estrutura para a VetLife!"
    },
    {
        "role": "user",
        "content": "Olá! Ficamos muito felizes com a sua compreensão sobre o que precisamos. Suas perguntas foram muito pertinentes e nos ajudaram a visualizar melhor o sistema. Aqui estão nossas definições:\n\nSobre Tutores e Animais:\n\n    Dados: Sim, o CPF é essencial para a emissão de recibos e identificação. O E-mail e o WhatsApp são fundamentais para nossa comunicação.\n\n    Animais: Por enquanto, focamos em cães e gatos, mas deixe o campo 'Espécie' aberto para outros (como coelhos). Precisamos registrar Raça, Data de Nascimento (ou idade aproximada), Peso atual e Sexo. Um campo de 'Alergias' seria vital.\n\nSobre Vacinas:\n\n    Detalhes: Precisamos registrar o Tipo, Lote e Fabricante para segurança jurídica e rastreabilidade.\n\n    Alertas: Consideramos 'próximo de vencer' com 30 dias de antecedência. Seria incrível se o sistema sugerisse o envio de uma mensagem automática via WhatsApp para o tutor.\n\nSobre Consultas e Agendamento:\n\n    Equipe: Temos 3 veterinários. Cada um precisa de sua própria agenda para evitar conflitos.\n\n    Status: Precisamos registrar se foi 'Realizada', 'Cancelada' ou 'Faltou'. No cancelamento, um campo de motivo breve é suficiente.\n\n    Serviços: Além de consultas, realizamos Cirurgias e Exames laboratoriais, que também precisam ser agendados.\n\nSobre Histórico Clínico:\n\n    Estrutura: O registro deve conter: Data, Veterinário Responsável, Anamnese (queixas), Exame Físico, Suspeita Diagnóstica e Prescrição Médica. É fundamental que possamos anexar PDFs de resultados de exames.\n\nSobre Fechamento de Caixa:\n\n    Escopo: Por enquanto, apenas Serviços (consultas e vacinas). Não vendemos produtos físicos ainda.\n\n    Pagamento: Aceitamos Dinheiro, Pix, Crédito e Débito. O sistema precisa separar os totais por forma de pagamento para conferirmos com as maquininhas no fim do dia."
    },
    {
        "role": "model",
        "content": "Perfeito! Muito obrigado pelas respostas detalhadas, elas são extremamente valiosas para refinar nosso modelo. É ótimo ver como vocês já têm uma visão clara das necessidades.\n\nCom base em suas definições, minha compreensão sobre a VetLife agora se aprofunda, e já consigo visualizar as principais entidades e como elas se relacionam:\n\n### Entidades e Atributos Principais:\n\n*   **Tutor:**\n    *   **Atributos:** Nome, Telefone, Endereço, **CPF (essencial)**, **E-mail (fundamental)**, **WhatsApp (fundamental)**.\n*   **Animal:**\n    *   **Atributos:** Nome, Espécie (campo aberto, com foco em Cão e Gato), **Raça**, **Data de Nascimento (ou idade aproximada)**, **Peso atual**, **Sexo**, **Alergias (vital)**.\n    *   **Relacionamento:** Vinculado a um Tutor.\n*   **Veterinário:**\n    *   **Atributos:** Nome (implícito).\n    *   **Relacionamento:** Responsável por Agendamentos e Registros Clínicos.\n*   **Vacina (registro da aplicação):**\n    *   **Atributos:** Data de Aplicação, Data de Vencimento, **Tipo**, **Lote**, **Fabricante**.\n    *   **Relacionamento:** Vinculada a um Animal.\n*   **Serviço Agendado (genérico para Consulta, Cirurgia, Exame):**\n    *   **Atributos:** Data/Hora, Veterinário Responsável, **Tipo de Serviço (Consulta, Cirurgia, Exame laboratorial)**, **Status (Realizada, Cancelada, Faltou)**, **Motivo do Cancelamento (campo breve)**.\n    *   **Relacionamento:** Vinculado a um Animal e a um Veterinário.\n*   **Histórico Clínico (registro):**\n    *   **Atributos:** Data, Veterinário Responsável, **Anamnese (queixas)**, **Exame Físico**, **Suspeita Diagnóstica**, **Prescrição Médica**.\n    *   **Capacidade:** Anexar **PDFs de resultados de exames**.\n    *   **Relacionamento:** Vinculado a um Animal.\n*   **Atendimento (para Fechamento de Caixa):**\n    *   **Escopo:** Abrange Serviços (Consultas, Vacinas, Cirurgias, Exames laboratoriais). Não inclui produtos físicos.\n    *   **Atributos:** Valor Total, **Forma de Pagamento (Dinheiro, Pix, Crédito, Débito)**.\n    *   **Relacionamento:** Vinculado a um Serviço e, indiretamente, a um Animal/Tutor.\n\n### Lógica e Regras de Negócio:\n\n*   **Alerta de Vacinas:** \"Próximo de vencer\" = 30 dias de antecedência. Desejo de **sugerir envio de mensagem automática via WhatsApp** para o tutor.\n*   **Agendamento:** Cada veterinário possui sua própria agenda para controle de disponibilidade.\n*   **Fechamento de Caixa:** Soma os valores de todos os serviços do dia, separando os totais por forma de pagamento.\n\nEstá ficando muito claro! Para garantir que não deixemos escapar nenhum detalhe e que o sistema seja robusto, tenho mais algumas perguntas para aprofundar em pontos específicos:\n\n1.  **Veterinários:** Vocês mencionaram 3 veterinários. Além do nome, há alguma outra informação que seria útil registrar para cada um deles no sistema, como um número de registro (CRMV), especialidade, ou até mesmo horários de trabalho habituais para ajudar no agendamento?\n2.  **Precificação dos Serviços:** Os serviços (Consultas, Cirurgias, Exames laboratoriais e Vacinas) têm um preço fixo, ou os valores podem variar? Por exemplo, uma cirurgia pode ter um preço que depende da complexidade, ou uma consulta de especialidade ser mais cara? E como vocês calculam o valor total de um atendimento que pode incluir uma consulta e uma vacina, por exemplo?\n3.  **Anexos no Histórico Clínico:** Sobre a funcionalidade de anexar PDFs de resultados de exames, esses exames são sempre realizados *dentro* da clínica (e vocês mesmos geram o PDF), ou vocês também recebem resultados de laboratórios externos que precisam ser digitalizados e anexados? E como vocês imaginam esse processo de anexação no dia a dia (por exemplo, arrastar e soltar um arquivo, ou selecionar de uma pasta)?\n4.  **Integração WhatsApp:** A ideia de \"sugerir o envio de uma mensagem automática via WhatsApp\" para o alerta de vacinas é excelente. Vocês esperam que o sistema apenas gere um lembrete para a equipe enviar manualmente a mensagem, ou o ideal seria que o sistema *realmente* enviasse a mensagem automaticamente para o tutor (o que geralmente envolve integração com a API do WhatsApp, que tem custos e maior complexidade)?\n5.  **Campo \"Alergias\" do Animal:** Para as \"Alergias\", vocês preferem um campo de texto livre onde se possa digitar qualquer tipo de alergia, ou seria mais interessante ter a opção de selecionar de uma lista pré-definida (que pode ser editada e expandida por vocês) para padronizar os registros?\n\nAgradeço novamente a colaboração! Cada detalhe nos ajuda a construir um modelo mais preciso e eficiente para a VetLife."
    },
    {
        "role": "user",
        "content": "Olá! Que perguntas fantásticas. É gratificante ver o sistema ganhando forma com esse nível de detalhe. Vamos às definições para deixar a VetLife 'tinindo':\n1. Perfil dos Veterinários: Identidade e Organização\n\nAlém do nome, o CRMV é obrigatório (precisamos dele em cada receita gerada). A Especialidade é o grande diferencial: se um tutor ligar querendo um cardiologista, o recepcionista precisa ver isso de imediato.\n\n    A \"Sacada\": Adorei a ideia dos horários. Quero que cada veterinário tenha uma cor específica na agenda. Assim, batendo o olho no calendário da semana, sabemos quem está na clínica (Ex: Dr. Rodrigo é Azul, Dra. Ana é Verde).\n\n2. Precificação: O \"Carrinho de Compras\" Veterinário\n\nTrabalhamos com uma base mista. Consultas e Vacinas têm preço fixo, mas Cirurgias e Exames são voláteis.\n\n    A \"Sacada\": No final do atendimento, o sistema deveria funcionar como um 'checkout'. O veterinário vai selecionando o que foi feito (Ex: 1 Consulta + 1 Vacina V8 + 1 Hemograma) e o sistema soma tudo. Precisamos ter a liberdade de editar o valor final ou dar um desconto (o famoso 'valor camarada' para protetores de animais).\n\n3. Anexos: O Fim das Pastas de Papel\n\nRecebemos muitos exames de laboratórios externos (em PDF ou fotos de celular mandadas pelos tutores) e também geramos nossos próprios laudos.\n\n    A \"Sacada\": O 'Arraste e Solte' (Drag & Drop) é indispensável pela agilidade. Seria incrível se, ao abrir o histórico do animal, houvesse uma 'galeria' de anexos organizada por data, para que o veterinário não precise baixar o arquivo toda vez que quiser dar uma olhada rápida num exame antigo.\n\n4. Integração WhatsApp: O Equilíbrio entre Custo e Magia\n\nSabemos que a API oficial pode ser cara. Para começar, o ideal seria o \"Caminho do Meio\":\n\n    A \"Sacada\": O sistema gera o alerta de vacina e apresenta um botão verde: \"Enviar Lembrete\". Ao clicar, o sistema abre o WhatsApp Web com uma mensagem já escrita (Ex: 'Olá, João! A vacina da Luna vence em 5 dias. Vamos agendar?'). Assim, não temos o custo da API, mas ganhamos a velocidade de não precisar digitar a mesma frase 50 vezes ao dia.\n\n5. Campo de Alergias: O Alerta Vermelho\n\nAlergia é coisa séria. Se eu selecionar 'Alergia a Dipirona' de uma lista, evito erros de digitação, mas sempre surge uma alergia estranha que não está no catálogo.\n\n    A \"Sacada\": Vamos de Modelo Híbrido. Uma lista de seleção para as mais comuns, mas com a opção 'Outras' que abre um campo de texto.\n\n    O \"Pulo do Gato\": Se o animal tiver qualquer alergia cadastrada, um ícone de exclamação vermelho ou um banner deve brilhar no topo do prontuário dele. O veterinário precisa ver isso antes mesmo de dar 'bom dia'!"
    },
    {
        "role": "model",
        "content": "Uau! Que clareza e criatividade nas suas respostas! As \"sacadas\" e o \"pulo do gato\" são exatamente o tipo de insights que transformam um sistema funcional em uma ferramenta indispensável e intuitiva para o dia a dia da VetLife. Estou realmente impressionado com a sua visão!\n\nVamos consolidar esses pontos, pois eles adicionam camadas importantes de funcionalidade e usabilidade:\n\n### Revisão e Detalhamento de Entidades e Atributos:\n\n*   **Veterinário:**\n    *   **Atributos Adicionais:** **CRMV (obrigatório)**, **Especialidade**, **Cor na Agenda (para visualização)**.\n    *   **Regra:** Cada veterinário tem sua própria agenda.\n*   **Serviço (Genérico para 'item de atendimento'):**\n    *   **Atributos:** Nome (ex: \"Consulta Clínica\", \"Vacina V8\", \"Hemograma\"), **Preço Base (fixo)**, **Tipo (Consulta, Vacina, Cirurgia, Exame)**.\n*   **Item de Atendimento (no 'checkout'):**\n    *   **Atributos:** Serviço Referenciado, **Quantidade**, **Valor Unitário Aplicado (pode ser editado)**, **Desconto Aplicado (se houver)**.\n    *   **Regra:** O sistema soma os itens para o valor total do atendimento.\n*   **Histórico Clínico (registro):**\n    *   **Capacidade Adicional:** **\"Galeria\" de anexos organizada por data** no prontuário.\n    *   **Anexos:** Suporte a PDF e imagens (fotos de celular).\n    *   **Mecanismo:** Arrastar e Soltar (Drag & Drop) para anexar.\n*   **Animal:**\n    *   **Campo \"Alergias\":** **Híbrido (Lista de seleção para comuns + campo de texto para \"Outras\")**.\n    *   **Alerta Visual:** **Ícone de exclamação vermelho ou banner no topo do prontuário** se houver alergias cadastradas.\n\n### Lógica e Regras de Negócio Aprimoradas:\n\n*   **Agenda Visual:** Cada veterinário com uma cor específica no calendário para identificação rápida.\n*   **Precificação Dinâmica (Checkout):**\n    *   Sistema age como um \"carrinho de compras\" ao final do atendimento.\n    *   Permite selecionar múltiplos serviços.\n    *   Soma automática dos valores.\n    *   **Flexibilidade para editar o valor final ou aplicar descontos por item ou no total.**\n*   **Gestão de Alergias:** Alerta visual proeminente no prontuário do animal.\n*   **Integração WhatsApp (Caminho do Meio):**\n    *   Sistema gera alerta de vacina próxima do vencimento.\n    *   Apresenta um botão \"Enviar Lembrete\".\n    *   Ao clicar, abre o WhatsApp Web com mensagem pré-preenchida para o tutor do animal.\n*   **Receitas Médicas:** O CRMV do veterinário deve ser automaticamente inserido em cada receita gerada.\n\nIsso é excelente! Com essas informações, temos uma base muito sólida para a modelagem da ontologia. A riqueza dos detalhes operacionais e das necessidades de usabilidade são cruciais.\n\nPara finalizar esta etapa de coleta de requisitos e garantir que temos tudo para um modelo robusto, tenho apenas mais uma pergunta que pode impactar a estrutura de dados:\n\n1.  **Usuários e Permissões:** O sistema será usado por diferentes perfis de pessoas na clínica (recepcionistas, veterinários, talvez o administrador da clínica)? Se sim, cada perfil terá acesso a diferentes funcionalidades ou dados? Por exemplo, um recepcionista pode agendar, mas não pode editar um histórico clínico, ou só o administrador pode ver os relatórios financeiros? Isso nos ajuda a pensar em como estruturar os usuários do sistema.\n\nAgradeço imensamente sua colaboração. A VetLife está no caminho certo para ter um sistema que realmente faça a diferença!"
    },
    {
        "role": "user",
        "content": "1. Perfil: Recepção (O Coração do Atendimento)\n\nEles são os primeiros a usar o sistema e precisam de agilidade no front-end.\n\n    O que podem fazer: Cadastrar tutores e animais, gerenciar toda a agenda (marcar, remarcar, cancelar), realizar o 'check-out' dos atendimentos e receber pagamentos.\n\n    A \"Tranca\": Eles não podem, de forma alguma, ler ou editar o Histórico Clínico (prontuário médico). Também não devem ter acesso aos relatórios de faturamento total do mês ou margem de lucro. O papel deles é operacional e financeiro imediato.\n\n2. Perfil: Veterinário (O Cérebro da Clínica)\n\nFoco total na saúde do animal e na precisão dos registros.\n\n    O que podem fazer: Ver a sua própria agenda, preencher o Histórico Clínico, anexar exames, prescrever medicamentos e dar baixa nos procedimentos realizados.\n\n    A \"Tranca\": Um veterinário não deve conseguir apagar um registro de histórico após finalizado (apenas adicionar adendos). Além disso, não precisam ter acesso às funções administrativas de caixa (como ver o quanto a clínica faturou no mês ou gerenciar o salário dos colegas). Eles veem apenas o valor dos serviços que eles mesmos prestaram para conferência simples.\n\n3. Perfil: Administrador (O Comandante)\n\nAcesso total para garantir que a engrenagem esteja girando.\n\n    O que podem fazer: Tudo o que os perfis anteriores fazem, mais: visualizar relatórios financeiros completos, configurar preços de serviços, excluir cadastros feitos por erro (com log de auditoria) e gerenciar os usuários do sistema.\n\n    A \"Sacada\": Só o administrador pode 'reabrir' um atendimento fechado para correções de valores ou datas, garantindo que nada seja alterado sem supervisão."
    },
    {
        "role": "model",
        "content": "Excelente! Essa última rodada de detalhes sobre **Usuários e Permissões** é a cereja do bolo. É fundamental para a segurança e a eficiência do sistema ter esses perfis bem definidos, e vocês os descreveram com uma clareza impressionante. As \"trancas\" e \"sacadas\" para cada perfil são muito inteligentes e demonstram um profundo conhecimento das necessidades operacionais da VetLife.\n\n**Confirmando os perfis:**\n\n*   **Recepcionista:** Foco no *front-end* e fluxo de atendimento (cadastro, agendamento, checkout, recebimento de pagamentos). Acesso restrito ao Histórico Clínico e relatórios financeiros gerenciais.\n*   **Veterinário:** Foco na *saúde do animal* (agenda própria, preenchimento e consulta de Histórico Clínico, anexos, prescrição, baixa de procedimentos). Não pode apagar histórico finalizado, nem acessar funções administrativas de caixa ou relatórios financeiros de outros.\n*   **Administrador:** Acesso *total* (todas as funções dos outros perfis, relatórios financeiros completos, configuração de serviços, gerenciamento de usuários, exclusão com log, reabertura de atendimentos).\n\nCom essas informações, temos um panorama extremamente detalhado e robusto para iniciar a modelagem da ontologia da VetLife. Coletamos dados sobre as entidades, seus atributos, relacionamentos, regras de negócio, funcionalidades-chave e agora, os perfis de usuários e suas permissões.\n\nAcredito que temos todas as especificações necessárias para construir um modelo conceitual completo e gerar um relatório detalhado.\n\nVocê gostaria que eu compilasse todas essas informações em um relatório Markdown completo, como um documento de especificação para o sistema da VetLife?"
    },
    {
        "role": "user",
        "content": "faça um relatorio"
    },
    {
        "role": "model",
        "content": "Excelente! Com certeza. É um prazer compilar todas essas informações valiosas em um relatório detalhado.\n\nAqui está o relatório de especificação do sistema para a VetLife, baseado em nossa entrevista:\n\n---\n\n# Relatório de Especificação do Sistema para a Clínica Veterinária VetLife\n\n**Data:** 26 de Maio de 2024\n**Consultor:** Engenheiro de Conhecimento Sênior em Ontologias\n**Cliente:** Clínica Veterinária VetLife\n\n## 1. Introdução\n\nEste documento detalha os requisitos e especificações para o desenvolvimento de um sistema de gerenciamento para a clínica veterinária VetLife. O objetivo é modernizar as operações, eliminando o uso de registros em papel e otimizando processos como cadastro de tutores e animais, controle de vacinas, agendamento de consultas, gerenciamento de histórico clínico e fechamento de caixa.\n\n## 2. Objetivos do Sistema\n\nO sistema visa alcançar os seguintes objetivos principais para a VetLife:\n\n*   **Centralização de Dados:** Consolidar todas as informações de tutores, animais e atendimentos em um único local digital.\n*   **Otimização do Atendimento:** Agilizar o processo de agendamento e a consulta do histórico dos animais.\n*   **Controle Proativo de Saúde:** Implementar um sistema de alerta para vacinas, permitindo comunicação proativa com os tutores.\n*   **Eficiência Financeira:** Simplificar o processo de precificação de serviços e o fechamento de caixa diário.\n*   **Segurança e Rastreabilidade:** Garantir a integridade dos dados clínicos e financeiros, com controle de acesso e rastreabilidade de informações.\n\n## 3. Entidades e Seus Atributos\n\nAbaixo estão as principais entidades identificadas e seus respectivos atributos, com destaque para os detalhes específicos da VetLife:\n\n### 3.1. Tutor\nRepresenta o proprietário ou responsável pelo animal.\n*   **ID_Tutor:** (Identificador único)\n*   **Nome:** (Texto)\n*   **Telefone:** (Texto)\n*   **Endereço:** (Texto)\n*   **CPF:** (Texto, **essencial para recibos e identificação**)\n*   **Email:** (Texto, **fundamental para comunicação**)\n*   **WhatsApp:** (Texto, **fundamental para comunicação**)\n\n### 3.2. Animal\nRepresenta o paciente da clínica.\n*   **ID_Animal:** (Identificador único)\n*   **Nome:** (Texto)\n*   **Espécie:** (Texto, campo aberto com foco inicial em \"Cão\" e \"Gato\", mas flexível para \"Coelho\" e outros)\n*   **Raça:** (Texto)\n*   **Data_Nascimento:** (Data, ou Idade_Aproximada em texto livre)\n*   **Peso_Atual:** (Numérico, em kg)\n*   **Sexo:** (Texto, ex: \"Macho\", \"Fêmea\")\n*   **Alergias:** (Híbrido: Lista de seleção para alergias comuns + campo de texto livre para \"Outras\". **Crítico: Um ícone de exclamação vermelho ou banner deve brilhar no topo do prontuário se houver qualquer alergia cadastrada.**)\n*   **ID_Tutor:** (Chave estrangeira, vincula o animal ao seu tutor)\n\n### 3.3. Veterinário\nRepresenta os profissionais que realizam os atendimentos.\n*   **ID_Veterinario:** (Identificador único)\n*   **Nome:** (Texto)\n*   **CRMV:** (Texto, **obrigatório, essencial para receitas**)\n*   **Especialidade:** (Texto, **importante para direcionamento de tutores**)\n*   **Cor_Agenda:** (Cor, **para identificação visual rápida na agenda**)\n*   **Horarios_Trabalho:** (Opcional: Campo para configurar horários habituais, para auxílio no agendamento)\n\n### 3.4. Serviço\nRepresenta os tipos de procedimentos ou produtos oferecidos pela clínica.\n*   **ID_Servico:** (Identificador único)\n*   **Nome:** (Texto, ex: \"Consulta Clínica\", \"Vacina V8\", \"Hemograma\", \"Cirurgia de Castração\")\n*   **Tipo:** (Texto, Categorias: \"Consulta\", \"Vacina\", \"Cirurgia\", \"Exame Laboratorial\")\n*   **Preco_Base:** (Numérico, valor padrão do serviço)\n\n### 3.5. Atendimento\nRepresenta uma instância de um serviço prestado a um animal em um determinado momento. Agrupa os serviços realizados para o \"checkout\".\n*   **ID_Atendimento:** (Identificador único)\n*   **Data_Hora:** (Data e Hora do atendimento)\n*   **ID_Animal:** (Chave estrangeira)\n*   **ID_Veterinario:** (Chave estrangeira, o veterinário que realizou o atendimento)\n*   **Valor_Total_Calculado:** (Numérico, soma dos itens do atendimento)\n*   **Valor_Total_Final:** (Numérico, valor após descontos/edições)\n*   **Forma_Pagamento:** (Enum: \"Dinheiro\", \"Pix\", \"Crédito\", \"Débito\")\n*   **Status:** (Enum: \"Aberto\", \"Fechado\", \"Cancelado\")\n*   **Observacoes_Caixa:** (Texto, para detalhes sobre o pagamento)\n*   **ID_Usuario_Fechamento:** (Chave estrangeira, quem fechou o atendimento)\n\n### 3.6. Item_Atendimento\nRepresenta um serviço específico incluído dentro de um Atendimento (o \"carrinho de compras\").\n*   **ID_Item_Atendimento:** (Identificador único)\n*   **ID_Atendimento:** (Chave estrangeira, vincula ao atendimento pai)\n*   **ID_Servico:** (Chave estrangeira, o serviço que foi prestado)\n*   **Quantidade:** (Numérico, ex: 1)\n*   **Valor_Unitario_Aplicado:** (Numérico, pode ser diferente do Preco_Base)\n*   **Desconto_Aplicado:** (Numérico, valor do desconto em R$)\n*   **Valor_Total_Item:** (Numérico, Valor_Unitario_Aplicado * Quantidade - Desconto_Aplicado)\n\n### 3.7. Vacina_Aplicada (Registro de Aplicação de Vacina)\nRepresenta o registro de uma vacina administrada ao animal.\n*   **ID_Vacina_Aplicada:** (Identificador único)\n*   **ID_Animal:** (Chave estrangeira)\n*   **Tipo_Vacina:** (Texto, ex: \"V8\", \"Raiva\", \"Gripe\")\n*   **Data_Aplicacao:** (Data)\n*   **Data_Vencimento:** (Data, data da próxima dose ou reforço)\n*   **Lote:** (Texto, **para rastreabilidade e segurança jurídica**)\n*   **Fabricante:** (Texto, **para rastreabilidade e segurança jurídica**)\n*   **ID_Veterinario:** (Chave estrangeira, quem aplicou a vacina)\n*   **ID_Atendimento:** (Chave estrangeira, se a vacina foi parte de um atendimento)\n\n### 3.8. Agendamento\nRepresenta um compromisso futuro na clínica.\n*   **ID_Agendamento:** (Identificador único)\n*   **ID_Animal:** (Chave estrangeira)\n*   **ID_Tutor:** (Chave estrangeira)\n*   **ID_Veterinario:** (Chave estrangeira, o veterinário agendado)\n*   **Data_Hora_Inicio:** (Data e Hora)\n*   **Data_Hora_Fim:** (Data e Hora, para controle de duração)\n*   **Tipo_Servico_Agendado:** (Enum: \"Consulta\", \"Cirurgia\", \"Exame Laboratorial\")\n*   **Status:** (Enum: \"Agendado\", \"Realizado\", \"Cancelado\", \"Faltou\")\n*   **Motivo_Cancelamento:** (Texto, campo breve, se Status for \"Cancelado\")\n*   **Observacoes_Agendamento:** (Texto)\n\n### 3.9. Historico_Clinico_Registro\nRepresenta uma entrada no prontuário médico de um animal.\n*   **ID_Historico_Clinico:** (Identificador único)\n*   **ID_Animal:** (Chave estrangeira)\n*   **ID_Veterinario:** (Chave estrangeira, o veterinário responsável pelo registro)\n*   **Data_Registro:** (Data e Hora)\n*   **Anamnese:** (Texto, queixas e histórico)\n*   **Exame_Fisico:** (Texto, resultados do exame físico)\n*   **Suspeita_Diagnostica:** (Texto)\n*   **Prescricao_Medica:** (Texto, medicamentos, tratamentos)\n\n### 3.10. Anexo_Historico\nRepresenta um arquivo anexado a um registro de histórico clínico.\n*   **ID_Anexo:** (Identificador único)\n*   **ID_Historico_Clinico:** (Chave estrangeira)\n*   **Nome_Arquivo:** (Texto)\n*   **Tipo_Arquivo:** (Texto, ex: \"PDF\", \"JPG\", \"PNG\")\n*   **Caminho_Armazenamento:** (Texto, URL ou caminho para o arquivo)\n*   **Data_Upload:** (Data e Hora)\n*   **Descricao:** (Texto, breve descrição do anexo)\n\n### 3.11. Usuario\nRepresenta os usuários do sistema.\n*   **ID_Usuario:** (Identificador único)\n*   **Nome_Usuario:** (Texto)\n*   **Senha_Hash:** (Texto, senha criptografada)\n*   **ID_Veterinario:** (Chave estrangeira, opcional, se o usuário for um veterinário)\n*   **Perfil:** (Enum: \"Recepcionista\", \"Veterinário\", \"Administrador\")\n\n## 4. Relacionamentos Chave\n\n*   **Tutor 1:N Animal:** Um tutor pode ter múltiplos animais.\n*   **Animal N:1 Tutor:** Um animal pertence a um único tutor.\n*   **Animal 1:N Vacina_Aplicada:** Um animal pode receber múltiplas vacinas.\n*   **Animal 1:N Agendamento:** Um animal pode ter múltiplos agendamentos.\n*   **Animal 1:N Historico_Clinico_Registro:** Um animal possui um histórico clínico composto por múltiplos registros.\n*   **Historico_Clinico_Registro 1:N Anexo_Historico:** Um registro de histórico pode ter múltiplos anexos.\n*   **Veterinário 1:N Agendamento:** Um veterinário pode ter múltiplos agendamentos.\n*   **Veterinário 1:N Historico_Clinico_Registro:** Um veterinário é responsável por múltiplos registros clínicos.\n*   **Veterinário 1:N Vacina_Aplicada:** Um veterinário pode aplicar múltiplas vacinas.\n*   **Atendimento 1:N Item_Atendimento:** Um atendimento pode conter múltiplos itens de serviço.\n*   **Item_Atendimento N:1 Serviço:** Um item de atendimento refere-se a um tipo de serviço.\n*   **Usuario N:1 Veterinário:** Um usuário do tipo \"Veterinário\" é vinculado a um registro de Veterinário.\n\n## 5. Regras de Negócio e Lógica\n\n### 5.1. Gestão de Vacinas\n*   **Alerta de Vencimento:** O sistema deve identificar vacinas com \"próximo de vencer\" com **30 dias de antecedência** da `Data_Vencimento`.\n*   **Notificação WhatsApp (Caminho do Meio):** Ao identificar uma vacina próxima do vencimento, o sistema deve apresentar um botão **\"Enviar Lembrete\"**. Ao clicar, o sistema deve abrir o **WhatsApp Web** com uma mensagem pré-preenchida para o `WhatsApp` do `Tutor` (ex: \"Olá, [Nome_Tutor]! A vacina de [Nome_Animal] vence em 5 dias. Vamos agendar?\").\n*   **Rastreabilidade:** Registro obrigatório de `Tipo_Vacina`, `Lote` e `Fabricante` para cada `Vacina_Aplicada`.\n\n### 5.2. Agendamento\n*   **Agenda por Veterinário:** Cada `Veterinário` deve ter sua própria agenda para controle de disponibilidade e evitar conflitos de horário.\n*   **Visualização Colorida:** A agenda deve exibir os agendamentos com a `Cor_Agenda` correspondente ao `Veterinário` para identificação visual rápida.\n*   **Status do Agendamento:** O `Status` do `Agendamento` deve ser atualizável para \"Agendado\", \"Realizado\", \"Cancelado\" ou \"Faltou\".\n*   **Motivo de Cancelamento:** Se o status for \"Cancelado\", um campo `Motivo_Cancelamento` (breve) deve ser preenchido.\n\n### 5.3. Precificação e Fechamento de Caixa\n*   **\"Checkout\" Dinâmico:** No final de um atendimento, o sistema deve funcionar como um \"carrinho de compras\". O usuário (Veterinário ou Recepcionista) selecionará os `Serviços` prestados (`Item_Atendimento`).\n*   **Soma Automática:** O sistema deve somar automaticamente os valores dos `Item_Atendimento` para calcular o `Valor_Total_Calculado`.\n*   **Flexibilidade de Preço:** Deve ser possível **editar o `Valor_Unitario_Aplicado`** de um item ou aplicar um `Desconto_Aplicado` por item ou no `Valor_Total_Final` do `Atendimento`.\n*   **Fechamento de Caixa Diário:** O sistema deve calcular o `Valor_Total_Final` de todos os `Atendimento`s \"Fechados\" no dia.\n*   **Detalhe por Forma de Pagamento:** O fechamento de caixa deve totalizar os valores separadamente para `Dinheiro`, `Pix`, `Crédito` e `Débito`, conforme registrado na `Forma_Pagamento` de cada `Atendimento`.\n*   **Escopo do Caixa:** Por enquanto, o fechamento de caixa inclui apenas `Serviços` (Consultas, Vacinas, Cirurgias, Exames laboratoriais), não produtos físicos.\n\n### 5.4. Histórico Clínico\n*   **Estrutura Detalhada:** Cada `Historico_Clinico_Registro` deve conter `Data_Registro`, `ID_Veterinario` (responsável), `Anamnese`, `Exame_Fisico`, `Suspeita_Diagnostica` e `Prescricao_Medica`.\n*   **Anexos Visuais:** O sistema deve permitir anexar `PDFs` e imagens (`fotos de celular`) aos `Historico_Clinico_Registro`s.\n*   **Mecanismo de Anexo:** O método de anexar deve ser por **\"Arrastar e Soltar\" (Drag & Drop)** para agilizar o processo.\n*   **\"Galeria\" de Anexos:** Ao abrir o prontuário do animal, deve haver uma \"galeria\" de anexos organizada por `Data_Upload` para visualização rápida sem a necessidade de download.\n*   **Receitas Médicas:** O `CRMV` do `Veterinário` responsável deve ser automaticamente inserido em cada receita gerada.\n\n## 6. Perfis de Usuários e Permissões\n\nO sistema terá três perfis de usuários distintos, cada um com suas permissões específicas para garantir segurança e eficiência operacional:\n\n### 6.1. Perfil: Recepcionista\n*   **Acesso Permitido:**\n    *   Cadastrar e editar `Tutor`s e `Animal`s.\n    *   Gerenciar toda a `Agenda` (`Agendamento`s): marcar, remarcar, cancelar.\n    *   Realizar o 'check-out' dos `Atendimento`s (`Item_Atendimento`s e `Valor_Total_Final`).\n    *   Registrar `Forma_Pagamento` e receber pagamentos.\n*   **Acesso Restrito (\"Tranca\"):**\n    *   **Não pode ler ou editar o `Historico_Clinico_Registro` (prontuário médico).**\n    *   Não pode acessar relatórios de faturamento total do mês ou margem de lucro.\n\n### 6.2. Perfil: Veterinário\n*   **Acesso Permitido:**\n    *   Visualizar sua própria `Agenda` (`Agendamento`s).\n    *   Preencher e consultar `Historico_Clinico_Registro`s.\n    *   Anexar `Anexo_Historico`s (exames) aos registros clínicos.\n    *   Prescrever medicamentos (`Prescricao_Medica`).\n    *   Dar baixa em procedimentos realizados (`Atendimento`s).\n    *   Visualizar o valor dos serviços que eles mesmos prestaram para conferência simples.\n*   **Acesso Restrito (\"Tranca\"):**\n    *   **Não pode apagar um `Historico_Clinico_Registro` após finalizado (apenas adicionar adendos).**\n    *   Não tem acesso às funções administrativas de caixa (faturamento mensal, salários).\n\n### 6.3. Perfil: Administrador\n*   **Acesso Permitido (\"Comandante\"):**\n    *   Acesso total a todas as funcionalidades dos perfis de Recepcionista e Veterinário.\n    *   Visualizar relatórios financeiros completos (faturamento, margem, etc.).\n    *   Configurar `Preco_Base` de `Serviço`s.\n    *   Excluir cadastros feitos por erro (com registro de `Log_Auditoria` para rastreabilidade).\n    *   Gerenciar `Usuario`s do sistema (criação, edição, exclusão).\n*   **Funcionalidade Específica (\"Sacada\"):**\n    *   **Só o Administrador pode 'reabrir' um `Atendimento` \"Fechado\" para correções de valores ou datas, garantindo que nada seja alterado sem supervisão.**\n\n## 7. Requisitos Não Funcionais (Implícitos/Sugeridos)\n\n*   **Usabilidade:** A interface deve ser intuitiva e ágil, especialmente para o perfil de Recepcionista e para o \"Arrastar e Soltar\" de anexos.\n*   **Performance:** O sistema deve ser responsivo, mesmo com um volume crescente de dados (históricos, agendamentos).\n*   **Segurança:** Proteção dos dados sensíveis (CPF, histórico clínico) e controle de acesso baseado nos perfis de usuário.\n*   **Confiabilidade:** O sistema deve ser estável e garantir a persistência dos dados.\n*   **Auditoria:** Registro de logs para ações críticas (ex: exclusão de cadastros, reabertura de atendimentos).\n\n## 8. Próximos Passos\n\nCom este relatório de especificações detalhado, o próximo passo seria iniciar a fase de design do sistema, que pode incluir:\n\n1.  **Modelagem de Dados:** Criação de um diagrama de entidade-relacionamento (DER) para visualizar a estrutura do banco de dados.\n2.  **Design de Interface (UI/UX):** Desenvolvimento de wireframes e protótipos para as telas do sistema, garantindo a usabilidade e as \"sacadas\" propostas.\n3.  **Planejamento Técnico:** Definição das tecnologias a serem utilizadas e arquitetura do sistema.\n\n---\n\nEste documento serve como a base para o desenvolvimento do sistema da VetLife, refletindo todas as suas necessidades e visões."
    }
]